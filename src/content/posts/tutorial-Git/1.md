---
title: How to split a subdirectory into a separate git repository with full history 
published: 2025-07-29
pinned: false
description: Instructions for detaching a subdirectory to a new git repo while preserving commits.
image: ""
tags: [Tutorial, Git, Bash]
category: Tutorials
# licenseName: ""
# author: 
# sourceLink: ""
draft: false
series: ""
---


0. cd to the top-level directory of the project or open bash here
```bash
cd <path/to/main-repo-folder>
```

1. [Main Repo] Split the target folder into a temporary branch
```bash
git subtree split -P <path/to/target-folder> -b <name-of-temp-branch>
```

2. [Main Repo] Recursively remove the target folder
```bash
git rm -rf <path/to/target-folder>
```

3. [Main Repo] Create a new repository folder (Use the previously deleted folder path if setting it up as a submodule)
```bash
mkdir -pv <path/to/new-repo-folder>
```

4. [Main Repo] Navigate to the new repository folder
```bash
cd <path/to/new-repo-folder>
```

5. [New Repo] Initialize the repository
```bash
git init
```

6. [New Repo] Pull the temporary branch
```bash
git pull <path/to/main-repo-folder> <name-of-temp-branch>
```

7. [New Repo] (Optional) Check if any commit msg needs to be reworded
```bash
git rebase -i --root
```

8. [New Repo] Add the remote origin
```bash
git remote add origin <url-of-new-repo>
```

9. [New Repo] Push local changes to the remote repository
```bash
git push -u origin master
```

10. [New Repo] Navigate back to the main repository folder
```bash
cd <path/to/main-repo-folder>
```

11. [Main Repo] Delete the temporary branch
```bash
git branch -D <name-of-temp-branch>
```

12. [Main Repo] (Optional) Add the independent repository as a submodule
```bash
git submodule add <url-of-new-repo> <path/to/new-repo-folder>
```