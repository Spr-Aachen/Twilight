---
title: How to split a subdirectory into a separate git repository with full history 
published: 2025-07-29
pinned: false
description: Instructions for detaching a subdirectory to a new git repo while preserving commits.
image: ""
tags: [Tutorial, Git, Bash]
category: Tutorials
# licenseName: ""
# author: 
# sourceLink: ""
draft: false
series: ""
---


1. [主仓库] cd到目标文件夹所在目录
```bash
cd <dir/of/target-folder>
```

2. [主仓库] 将目标文件夹拆分到临时分支
```bash
git subtree split -P <name-of-target-folder> -b <name-of-temp-branch>
```

3. [主仓库] 递归删除目标文件夹
```bash
git rm -rf <name-of-target-folder>
```

4. [主仓库] 创建新仓库文件夹（若要作为子模块则命名为刚删除的目标文件夹名）
```bash
mkdir <name-of-new-repo>
```

5. [主仓库] cd到新仓库
```bash
cd <path/to/new-repo>
```

6. [新仓库] 初始化
```bash
git init
```

7. [新仓库] 拉取临时分支
```bash
git pull <path/to/main-repo> <name-of-temp-branch>
```

8. [新仓库] 添加源
```bash
git remote add origin <url-of-new-repo>
```

9. [新仓库] 提交本地到源
```bash
git push -u origin master
```

10. [新仓库] cd回主仓库
```bash
cd <path/to/main-repo>
```

11. [主仓库] 删除临时分支
```bash
git branch -D <name-of-temp-branch>
```

12. [主仓库] (Optional) 将独立仓库作为子模块
```bash
git submodule add <url-of-new-repo> <path/to/new-repo>
```