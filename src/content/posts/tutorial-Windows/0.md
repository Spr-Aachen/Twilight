---
title: How to fix windows update
published: 2025-03-21
pinned: false
description: A bat script to fix windows update.
image: ""
tags: [Tutorial, Git, Bat]
category: Tutorials
# licenseName: ""
# author: 
# sourceLink: ""
draft: false
series: ""
---


```bat
@echo off
:: Check admin
net session >nul 2>&1
if %errorLevel% == 0 (
    echo Running as admin
) else (
    echo Requesting for admin
    powershell -Command "Start-Process '%~f0' -Verb runAs"
    exit /b
)


set "UpdateDir=C:\Windows\SoftwareDistribution"


net stop wuauserv
net stop cryptSvc
net stop bits
net stop msiserver

if exist "%UpdateDir%\DataStore\" (
    rd /s /q "%UpdateDir%\DataStore"
)
if exist "%UpdateDir%\Download\" (
    rd /s /q "%UpdateDir%\Download"
)

net start wuauserv
net start cryptSvc
net start bits
net start msiserver
```